<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Copyright 2010-2014 Norconex Inc.

This file is part of Norconex HTTP Collector.

Norconex HTTP Collector is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Norconex HTTP Collector is distributed in the hope that it will be useful, 
but WITHOUT ANY WARRANTY; without even the implied warranty of 
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Norconex HTTP Collector. If not, see <http://www.gnu.org/licenses/>.
-->
<httpcollector id="Complex Crawl">

  #set($http = "com.norconex.collector.http")
  #set($core = "com.norconex.collector.core")
  #set($urlNormalizer   = "${http}.url.impl.GenericURLNormalizer")
  #set($filterExtension = "${core}.filter.impl.ExtensionReferenceFilter")
  #set($filterRegexRef  = "${core}.filter.impl.RegexReferenceFilter")
  
  <progressDir>${workdir}/progress</progressDir>
  <logsDir>${workdir}/logs</logsDir>

  <crawlerDefaults>

    <urlNormalizer class="$urlNormalizer" />
    <numThreads>2</numThreads>
    <maxDepth>0</maxDepth>
    <workDir>$workdir</workDir>
    <deleteOrphans>true</deleteOrphans>

    <httpURLFilters>
      <filter class="$filterExtension" onMatch="exclude">jpg,gif,png,ico,css,js</filter>
      <filter class="$filterRegexRef">http://www\.norconex\.com/product/collector-http-test/.*</filter>
    </httpURLFilters>

  </crawlerDefaults>

  <crawlers>

    <crawler id="Norconex Complex Test Page 1">
      <startURLs>
        <url>http://www.norconex.com/product/collector-http-test/complex1.php</url>
      </startURLs>
      #parse("shared/importer-config.xml")
      <committer class="com.norconex.committer.impl.FileSystemCommitter">
        <directory>${workdir}/crawledFiles1</directory>
      </committer>
    </crawler>

    <crawler id="Norconex Complex Test Page 2">
      <startURLs>
        <url>http://www.norconex.com/product/collector-http-test/complex2.php</url>
      </startURLs>
      #parse("shared/importer-config.xml")
      <committer class="com.norconex.committer.impl.FileSystemCommitter">
        <directory>${workdir}/crawledFiles2</directory>
      </committer>
    </crawler>

  </crawlers>

</httpcollector>